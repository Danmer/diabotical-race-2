const fs = require('fs')
const axios = require('axios')

async function buildData() {
  try {
    const data = JSON.parse('' + fs.readFileSync(`${__dirname}/data_old.json`))
    const mapsData = await axios('https://quakelife.ru/diabotical/maps/data/last.min.json').then((res) => res.data)
    // data.maps = data.maps.filter((map) => mapsData.maps.find((m) => m.id.toLowerCase() === map.id.toLowerCase() || m.name.toLowerCase() === map.id.toLowerCase()))

    const days = [...new Set(data.runs.map((run) => run.datetime))]
    const tags = [...new Set(data.maps.reduce((array, map) => array.concat(map.tagNames), []))]
    const players = []
    for (let index = 0; index < 12000; index++) {
      players.push({
        name: sample(names),
        flag: sample(flags),
      })
    }
    for (let index = 0; index < 880; index++) {
      data.maps.push({
        active: true,
        name: sample(names),
        versions: [1],
        physicsIds: ['race', 'vintage', 'diabotical'],
        authorNames: [sample(names)],
        tagNames: [sample(tags)],
        image: '',
        id: '' + Math.random(),
        datetime: new Date(sample(days)).toISOString(),
      })
    }
    for (let index = 0; index < 48000; index++) {
      const map = sample(data.maps)
      console.log(index)
      data.runs.push({
        approved: true,
        datetime: new Date(new Date(sample(days)).getTime() - Math.round(Math.random() * 200 * 24 * 60 * 60 * 1000)).toISOString(),
        map: map.name,
        version: map.versions[map.versions.length - 1],
        physicsId: sample(['race', 'race', 'vintage', 'diabotical']),
        ...sample(players),
        time: Math.round(Math.random() * 59999),
        video: '' + Math.random() + '' + Math.random(),
        mapId: map.id,
      })
    }
    
    fs.writeFileSync(`${__dirname}/data_50000.json`, JSON.stringify(data))
  } catch (err) {
    console.error(err)
  }
}

function uniq(array) {
  return [...new Set(array)]
}

function sample(array) {
  return array[Math.round((array.length - 1) * Math.random())]
}

const names = [
  'abby',
  'angel',
  'annie',
  'baby',
  'bailey',
  'bandit',
  'bear',
  'bella',
  'bob',
  'boo',
  'boots',
  'bubba',
  'buddy',
  'buster',
  'cali',
  'callie',
  'casper',
  'charlie',
  'chester',
  'chloe',
  'cleo',
  'coco',
  'cookie',
  'cuddles',
  'daisy',
  'dusty',
  'felix',
  'fluffy',
  'garfield',
  'george',
  'ginger',
  'gizmo',
  'gracie',
  'harley',
  'jack',
  'jasmine',
  'jasper',
  'kiki',
  'kitty',
  'leo',
  'lilly',
  'lily',
  'loki',
  'lola',
  'lucky',
  'lucy',
  'luna',
  'maggie',
  'max',
  'mia',
  'midnight',
  'milo',
  'mimi',
  'missy',
  'misty',
  'mittens',
  'molly',
  'muffin',
  'nala',
  'oliver',
  'oreo',
  'oscar',
  'patches',
  'peanut',
  'pepper',
  'precious',
  'princess',
  'pumpkin',
  'rascal',
  'rocky',
  'sadie',
  'salem',
  'sam',
  'samantha',
  'sammy',
  'sasha',
  'sassy',
  'scooter',
  'shadow',
  'sheba',
  'simba',
  'simon',
  'smokey',
  'snickers',
  'snowball',
  'snuggles',
  'socks',
  'sophie',
  'spooky',
  'sugar',
  'tiger',
  'tigger',
  'tinkerbell',
  'toby',
  'trouble',
  'whiskers',
  'willow',
  'zoe',
  'zoey',
  'bella',
  'lucy',
  'daisy',
  'molly',
  'lola',
  'sophie',
  'sadie',
  'maggie',
  'chloe',
  'bailey',
  'roxy',
  'zoey',
  'lily',
  'luna',
  'coco',
  'stella',
  'gracie',
  'abby',
  'penny',
  'zoe',
  'ginger',
  'ruby',
  'rosie',
  'lilly',
  'ellie',
  'mia',
  'sasha',
  'lulu',
  'pepper',
  'nala',
  'lexi',
  'lady',
  'emma',
  'riley',
  'dixie',
  'annie',
  'maddie',
  'piper',
  'princess',
  'izzy',
  'maya',
  'olive',
  'cookie',
  'roxie',
  'angel',
  'belle',
  'layla',
  'missy',
  'cali',
  'honey',
  'millie',
  'harley',
  'marley',
  'holly',
  'kona',
  'shelby',
  'jasmine',
  'ella',
  'charlie',
  'minnie',
  'willow',
  'phoebe',
  'callie',
  'scout',
  'katie',
  'dakota',
  'sugar',
  'sandy',
  'josie',
  'macy',
  'trixie',
  'winnie',
  'peanut',
  'mimi',
  'hazel',
  'mocha',
  'cleo',
  'hannah',
  'athena',
  'lacey',
  'sassy',
  'lucky',
  'bonnie',
  'allie',
  'brandy',
  'sydney',
  'casey',
  'gigi',
  'baby',
  'madison',
  'heidi',
  'sally',
  'shadow',
  'cocoa',
  'pebbles',
  'misty',
  'nikki',
  'lexie',
  'grace',
  'sierra',
  'max',
  'buddy',
  'charlie',
  'jack',
  'cooper',
  'rocky',
  'toby',
  'tucker',
  'jake',
  'bear',
  'duke',
  'teddy',
  'oliver',
  'riley',
  'bailey',
  'bentley',
  'milo',
  'buster',
  'cody',
  'dexter',
  'winston',
  'murphy',
  'leo',
  'lucky',
  'oscar',
  'louie',
  'zeus',
  'henry',
  'sam',
  'harley',
  'baxter',
  'gus',
  'sammy',
  'jackson',
  'bruno',
  'diesel',
  'jax',
  'gizmo',
  'bandit',
  'rusty',
  'marley',
  'jasper',
  'brody',
  'roscoe',
  'hank',
  'otis',
  'bo',
  'joey',
  'beau',
  'ollie',
  'tank',
  'shadow',
  'peanut',
  'hunter',
  'scout',
  'blue',
  'rocco',
  'simba',
  'tyson',
  'ziggy',
  'boomer',
  'romeo',
  'apollo',
  'ace',
  'luke',
  'rex',
  'finn',
  'chance',
  'rudy',
  'loki',
  'moose',
  'george',
  'samson',
  'coco',
  'benny',
  'thor',
  'rufus',
  'prince',
  'chester',
  'brutus',
  'scooter',
  'chico',
  'spike',
  'gunner',
  'sparky',
  'mickey',
  'kobe',
  'chase',
  'oreo',
  'frankie',
  'mac',
  'benji',
  'bubba',
  'champ',
  'brady',
  'elvis',
  'copper',
  'cash',
  'archie',
  'walter',
]

const flags = [
  'ad',
  'ae',
  'af',
  'ag',
  'ai',
  'al',
  'am',
  'ao',
  'ar',
  'as',
  'at',
  'au',
  'aw',
  'az',
  'ba',
  'bb',
  'bd',
  'be',
  'bf',
  'bg',
  'bh',
  'bi',
  'bj',
  'bl',
  'bm',
  'bn',
  'bo',
  'bq',
  'br',
  'bs',
  'bt',
  'bw',
  'by',
  'bz',
  'ca',
  'cc',
  'cd',
  'cf',
  'cg',
  'ch',
  'ci',
  'ck',
  'cl',
  'cm',
  'cn',
  'co',
  'cr',
  'cu',
  'cv',
  'cw',
  'cx',
  'cy',
  'cz',
  'de',
  'dj',
  'dk',
  'dm',
  'do',
  'dz',
  'ec',
  'ee',
  'eg',
  'eh',
  'er',
  'es',
  'et',
  'eu',
  'fi',
  'fj',
  'fk',
  'fm',
  'fo',
  'fr',
  'ga',
  'gb',
  'gb-eng',
  'gb-nir',
  'gb-sct',
  'gb-wls',
  'gd',
  'ge',
  'gf',
  'gh',
  'gi',
  'gl',
  'gm',
  'gn',
  'gp',
  'gq',
  'gr',
  'gt',
  'gu',
  'gw',
  'gy',
  'hk',
  'hn',
  'hr',
  'ht',
  'hu',
  'id',
  'ie',
  'il',
  'im',
  'in',
  'iq',
  'ir',
  'is',
  'it',
  'je',
  'jm',
  'jo',
  'jp',
  'jr',
  'ke',
  'kg',
  'kh',
  'ki',
  'km',
  'kn',
  'kp',
  'kr',
  'kw',
  'ky',
  'kz',
  'la',
  'lb',
  'lc',
  'li',
  'lk',
  'lr',
  'ls',
  'lt',
  'lu',
  'lv',
  'ly',
  'ma',
  'mc',
  'md',
  'me',
  'mg',
  'mh',
  'mk',
  'ml',
  'mm',
  'mn',
  'mo',
  'mp',
  'mq',
  'mr',
  'ms',
  'mt',
  'mu',
  'mv',
  'mw',
  'mx',
  'my',
  'mz',
  'na',
  'nc',
  'ne',
  'nf',
  'ng',
  'ni',
  'nl',
  'no',
  'np',
  'nr',
  'nu',
  'nz',
  'oly',
  'om',
  'pa',
  'pe',
  'pf',
  'pg',
  'ph',
  'pk',
  'pl',
  'pm',
  'pr',
  'ps',
  'pt',
  'pw',
  'py',
  'qa',
  're',
  'ro',
  'rs',
  'ru',
  'rw',
  'sa',
  'sb',
  'sc',
  'sd',
  'se',
  'sg',
  'sh',
  'si',
  'sk',
  'sl',
  'sm',
  'sn',
  'so',
  'sr',
  'ss',
  'st',
  'sv',
  'sx',
  'sy',
  'sz',
  'tc',
  'td',
  'tg',
  'th',
  'tj',
  'tk',
  'tl',
  'tm',
  'tn',
  'to',
  'tr',
  'tt',
  'tv',
  'tw',
  'tz',
  'ua',
  'ug',
  'un',
  'us',
  'uy',
  'uz',
  'va',
  'vc',
  've',
  'vg',
  'vi',
  'vn',
  'vu',
  'wf',
  'ws',
  'xk',
  'ye',
  'yt',
  'za',
  'zm',
  'zw',
]

buildData()
